{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 1eada742fb536023f917","webpack:///./lib/index.js","webpack:///./lib/map/index.js","webpack:///./lib/map/google.js","webpack:///./lib/map/leaflet.js","webpack:///./lib/eventEmitter.js","webpack:///./lib/tileLoader.js"],"names":["Map","require","EventEmitter","TileLoader","Interactive","map","gridUrl","_bindMap","_tileLoader","_tileSize","_eventEmitter","tilejson","setUrl","grids","_map","on","_onMapClick","bind","_onMapMouseMove","event","callback","addEventListener","e","eventClone","cloneEvent","coords","_getTileCoordsFromMouseEvent","loadTile","z","x","y","then","tile","_objectForEvent","catch","dispatchEvent","err","pixelPoint","project","_unscale","getZoom","tileSize","Math","floor","eventType","point","resolution","max","pow","grid","gridX","gridY","idx","_utfDecode","charCodeAt","key","keys","data","hasOwnProperty","originalEvent","type","stopPropagation","_triggerEvent","extendedEvent","clear","off","char","module","exports","GoogleMap","LeafletMap","nativeMap","__gm","_listeners","latLng","getProjection","fromLatLngToPoint","scale","addListener","remove","da","pixel","latlng","wrap","containerPoint","layerPoint","target","click","undefined","move","out","error","_url","_cache","newValue","Promise","resolve","fetch","_buildTileUrl","_handleLimitErrors","url","replace","response","status","json","reject"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;AC7DA,IAAIA,MAAM,mBAAAC,CAAQ,CAAR,CAAV;AACA,IAAIC,eAAe,mBAAAD,CAAQ,CAAR,CAAnB;AACA,IAAIE,aAAa,mBAAAF,CAAQ,CAAR,CAAjB;;AAEA;;;;IAGMG,W;AACF,yBAAYC,GAAZ,EAAiBC,OAAjB,EAA0B;AAAA;;AACtB;AACA,YAAID,GAAJ,EAAS;AACL,iBAAKE,QAAL,CAAcF,GAAd;AACH;AACD,aAAKG,WAAL,GAAmB,IAAIL,UAAJ,CAAeG,OAAf,CAAnB;AACA;AACA,aAAKG,SAAL,GAAiB,GAAjB;AACA;AACA,aAAKC,aAAL,GAAqB,IAAIR,YAAJ,EAArB;AACH;;AAED;;;;;;;;;iCAKSS,S,EAAU;AACf,iBAAKH,WAAL,CAAiBI,MAAjB,CAAwBD,UAASE,KAAT,CAAe,CAAf,CAAxB;AACA,mBAAO,IAAP;AACH;;AAED;;;;;;;;4BAKIR,I,EAAK;AACL,iBAAKE,QAAL,CAAcF,IAAd;AACA,mBAAO,IAAP;AACH;;AAED;;;;;;;iCAISA,G,EAAK;AACV,iBAAKS,IAAL,GAAY,IAAId,GAAJ,CAAQK,GAAR,CAAZ;AACA,iBAAKS,IAAL,CAAUC,EAAV,CAAa,OAAb,EAAsB,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAtB;AACA,iBAAKH,IAAL,CAAUC,EAAV,CAAa,WAAb,EAA0B,KAAKG,eAAL,CAAqBD,IAArB,CAA0B,IAA1B,CAA1B;AACH;;AAED;;;;;;;;2BAKGE,K,EAAOC,Q,EAAU;AAChB,oBAAQD,KAAR;AACI,qBAAK,IAAL;AACI,yBAAKT,aAAL,CAAmBW,gBAAnB,CAAoC,WAApC,EAAiDD,QAAjD;AACA,yBAAKV,aAAL,CAAmBW,gBAAnB,CAAoC,OAApC,EAA6CD,QAA7C;AACA;AACJ,qBAAK,KAAL;AACI,yBAAKV,aAAL,CAAmBW,gBAAnB,CAAoC,YAApC,EAAkDD,QAAlD;AACA;AACJ,qBAAK,OAAL;AACI,yBAAKV,aAAL,CAAmBW,gBAAnB,CAAoC,OAApC,EAA6CD,QAA7C;AACA;AAVR;AAYA,mBAAO,IAAP;AACH;;AAED;;;;;;;oCAIYE,C,EAAG;AAAA;;AACX,gBAAMC,aAAa,KAAKT,IAAL,CAAUU,UAAV,CAAqBF,CAArB,CAAnB;AACA,gBAAMG,SAAS,KAAKC,4BAAL,CAAkCH,UAAlC,CAAf;AACA,iBAAKf,WAAL,CAAiBmB,QAAjB,CAA0BF,OAAOG,CAAjC,EAAoCH,OAAOI,CAA3C,EAA8CJ,OAAOK,CAArD,EACKC,IADL,CACU,gBAAQ;AACV,oBAAGC,SAAS,UAAZ,EAAuB;AACnB,2BAAO,MAAKC,eAAL,CAAqBD,IAArB,EAA2BT,UAA3B,EAAuC,OAAvC,CAAP;AACH;AACJ,aALL,EAMKW,KANL,CAMW,eAAO;AACV,sBAAKxB,aAAL,CAAmByB,aAAnB,CAAiC,OAAjC,EAA0CC,GAA1C;AACH,aARL;AASH;;AAED;;;;;;;wCAIgBd,C,EAAG;AAAA;;AACf,gBAAMC,aAAa,KAAKT,IAAL,CAAUU,UAAV,CAAqBF,CAArB,CAAnB;AACA,gBAAMG,SAAS,KAAKC,4BAAL,CAAkCH,UAAlC,CAAf;AACA,iBAAKf,WAAL,CAAiBmB,QAAjB,CAA0BF,OAAOG,CAAjC,EAAoCH,OAAOI,CAA3C,EAA8CJ,OAAOK,CAArD,EACKC,IADL,CACU,gBAAQ;AACV,oBAAGC,SAAS,UAAZ,EAAuB;AACnB,2BAAO,OAAKC,eAAL,CAAqBD,IAArB,EAA2BT,UAA3B,EAAuC,WAAvC,CAAP;AACH;AACJ,aALL,EAMKW,KANL,CAMW,eAAO;AACV,uBAAKxB,aAAL,CAAmByB,aAAnB,CAAiC,OAAjC,EAA0CC,GAA1C;AACH,aARL;AASH;;AAED;;;;;;;qDAI6BjB,K,EAAO;AAChC,gBAAMkB,aAAa,KAAKvB,IAAL,CAAUwB,OAAV,CAAkBnB,KAAlB,CAAnB;AACA,gBAAMM,SAAS,KAAKc,QAAL,CAAcF,UAAd,EAA0B,KAAK5B,SAA/B,CAAf;AACAgB,mBAAOG,CAAP,GAAW,KAAKd,IAAL,CAAU0B,OAAV,EAAX;AACA,mBAAOf,MAAP;AACH;;;iCAEQY,U,EAAYI,Q,EAAU;AAC3B,mBAAO;AACHZ,mBAAGa,KAAKC,KAAL,CAAWN,WAAWR,CAAX,GAAeY,QAA1B,CADA;AAEHX,mBAAGY,KAAKC,KAAL,CAAWN,WAAWP,CAAX,GAAeW,QAA1B;AAFA,aAAP;AAIH;;AAED;;;;;;;;;;;wCAQgBT,I,EAAMb,K,EAAOyB,S,EAAW;AACpC,gBAAMC,QAAQ,KAAK/B,IAAL,CAAUwB,OAAV,CAAkBnB,KAAlB,CAAd;AACA;AACA,gBAAM2B,aAAa,CAAnB;AACA;;AAJoC,4BAKrB,KAAKP,QAAL,CAAcM,KAAd,EAAqB,KAAKpC,SAA1B,CALqB;AAAA,gBAK9BoB,CAL8B,aAK9BA,CAL8B;AAAA,gBAK3BC,CAL2B,aAK3BA,CAL2B;;AAMpC,gBAAMiB,MAAML,KAAKM,GAAL,CAAS,CAAT,EAAY,KAAKlC,IAAL,CAAU0B,OAAV,EAAZ,CAAZ;AACAX,gBAAI,CAACA,IAAIkB,GAAL,IAAYA,GAAhB;AACAjB,gBAAI,CAACA,IAAIiB,GAAL,IAAYA,GAAhB;;AAEA,gBAAIf,QAAQA,KAAKiB,IAAjB,EAAuB;AACnB,oBAAIC,QAAQR,KAAKC,KAAL,CAAW,CAACE,MAAMhB,CAAN,GAAWA,IAAI,KAAKpB,SAArB,IAAmCqC,UAA9C,CAAZ;AACA,oBAAIK,QAAQT,KAAKC,KAAL,CAAW,CAACE,MAAMf,CAAN,GAAWA,IAAI,KAAKrB,SAArB,IAAmCqC,UAA9C,CAAZ;AACA,oBAAIM,MAAM,KAAKC,UAAL,CAAgBrB,KAAKiB,IAAL,CAAUE,KAAV,EAAiBG,UAAjB,CAA4BJ,KAA5B,CAAhB,CAAV;AACA,oBAAIK,MAAMvB,KAAKwB,IAAL,CAAUJ,GAAV,CAAV;AACA,oBAAIpB,KAAKyB,IAAL,CAAUC,cAAV,CAAyBH,GAAzB,CAAJ,EAAmC;AAC/B;AACApC,0BAAMsC,IAAN,GAAazB,KAAKyB,IAAL,CAAUF,GAAV,CAAb;AACH;AACJ;;AAED;AACApC,kBAAMG,CAAN,GAAUH,MAAMwC,aAAN,IAAuB,EAAEC,MAAMhB,SAAR,EAAjC;;AAEA;AACA,gBAAIzB,MAAMsC,IAAN,IAActC,MAAMwC,aAAxB,EAAuC;AACnCxC,sBAAMwC,aAAN,CAAoBE,eAApB;AACH;;AAED,iBAAKC,aAAL,CAAmBlB,SAAnB,EAA8BzB,KAA9B;AACH;;AAED;;;;;sCAEcyB,S,EAAWmB,a,EAAe;AACpC;AACA,gBAAI,CAACA,cAAcN,IAAnB,EAAyB;AACrB,qBAAK/C,aAAL,CAAmByB,aAAnB,CAAiC,YAAjC,EAA+C,EAA/C;AACA;AACH;AACD,gBAAIS,cAAc,WAAlB,EAA+B;AAC3B,qBAAKlC,aAAL,CAAmByB,aAAnB,CAAiC,WAAjC,EAA8C4B,aAA9C;AACA;AACH;AACD,gBAAInB,cAAc,OAAlB,EAA2B;AACvB,qBAAKlC,aAAL,CAAmByB,aAAnB,CAAiC,YAAjC,EAA+C,EAA/C;AACA,qBAAKzB,aAAL,CAAmByB,aAAnB,CAAiC,OAAjC,EAA0C4B,aAA1C;AACH;AACJ;;AAED;;;;;;iCAGS;AACN,iBAAKrD,aAAL,CAAmBsD,KAAnB;AACC;AACA,iBAAKlD,IAAL,CAAUmD,GAAV,CAAc,OAAd;AACA,iBAAKnD,IAAL,CAAUmD,GAAV,CAAc,WAAd;AACH;;AAED;;;;;;;;mCAKWC,I,EAAM;AACb,gBAAIA,QAAQ,EAAZ,EAAgB;AACZA;AACH;AACD,gBAAIA,QAAQ,EAAZ,EAAgB;AACZA;AACH;AACD,mBAAOA,OAAO,EAAd;AACH;;;;;;AAKLC,OAAOC,OAAP,GAAiB,EAAEhE,wBAAF,EAAjB,C;;;;;;;;;ACnNA,IAAIiE,YAAY,mBAAApE,CAAQ,CAAR,CAAhB;AACA,IAAIqE,aAAa,mBAAArE,CAAQ,CAAR,CAAjB;;AAEA,SAASD,GAAT,CAAauE,SAAb,EAAwB;AACpB,QAAIA,UAAUC,IAAd,EAAoB;AAChB,eAAO,IAAIH,SAAJ,CAAcE,SAAd,CAAP;AACH,KAFD,MAGK;AACD,eAAO,IAAID,UAAJ,CAAeC,SAAf,CAAP;AACH;AAEJ;AACDJ,OAAOC,OAAP,GAAiBpE,GAAjB,C;;;;;;;;;;;;;ICZMqE,S;AACF,uBAAYE,SAAZ,EAAuB;AAAA;;AACnB,aAAKzD,IAAL,GAAYyD,SAAZ;AACA,aAAKE,UAAL,GAAkB,EAAlB;AACH;;AAED;;;;;;;gCAGQtD,K,EAAO;AACX,gBAAMuD,SAASvD,MAAMuD,MAArB;AACA,gBAAM7B,QAAQ,KAAK/B,IAAL,CAAU6D,aAAV,GAA0BC,iBAA1B,CAA4CF,MAA5C,CAAd;AACA,gBAAMG,QAAQnC,KAAKM,GAAL,CAAS,CAAT,EAAY,KAAKR,OAAL,EAAZ,CAAd;AACA,mBAAO;AACHX,mBAAGa,KAAKC,KAAL,CAAWkC,QAAQhC,MAAMhB,CAAzB,CADA;AAEHC,mBAAGY,KAAKC,KAAL,CAAWkC,QAAQhC,MAAMf,CAAzB;AAFA,aAAP;AAIH;;;kCAES;AACN,mBAAO,KAAKhB,IAAL,CAAU0B,OAAV,EAAP;AACH;;;2BAEErB,K,EAAOC,Q,EAAU;AAChB,iBAAKqD,UAAL,CAAgBtD,KAAhB,IAAyB,KAAKL,IAAL,CAAUgE,WAAV,CAAsB3D,KAAtB,EAA6BC,QAA7B,CAAzB;AACH;;;4BAEGD,K,EAAM;AACN,iBAAKsD,UAAL,CAAgBtD,KAAhB,KAA0B,KAAKsD,UAAL,CAAgBtD,KAAhB,EAAuB4D,MAAvB,EAA1B;AACH;;AAED;;;;mCACW5D,K,EAAO;AACd,mBAAO;AACH6D,oBAAI7D,MAAM6D,EADP;AAEHN,wBAAQvD,MAAMuD,MAFX;AAGHO,uBAAO9D,MAAM8D;AAHV,aAAP;AAKH;;;;;;AAGLd,OAAOC,OAAP,GAAiBC,SAAjB,C;;;;;;;;;;;;;ICzCMC,U;AACF,wBAAYC,SAAZ,EAAuB;AAAA;;AACnB,aAAKzD,IAAL,GAAYyD,SAAZ;AACA,aAAKE,UAAL,GAAkB,EAAlB;AACH;;AAED;;;;;gCACQtD,K,EAAO;AACX,gBAAM+D,SAAS/D,MAAM+D,MAAN,CAAaC,IAAb,EAAf;AACA,mBAAO,KAAKrE,IAAL,CAAUwB,OAAV,CAAkB4C,MAAlB,EAA0B,KAAKpE,IAAL,CAAU0B,OAAV,EAA1B,EAA+CG,KAA/C,EAAP;AACH;;;kCAES;AACN,mBAAO,KAAK7B,IAAL,CAAU0B,OAAV,EAAP;AACH;;;2BAEErB,K,EAAOC,Q,EAAU;AAChB,iBAAKqD,UAAL,CAAgBtD,KAAhB,IAAyBC,QAAzB;AACA,mBAAO,KAAKN,IAAL,CAAUC,EAAV,CAAaI,KAAb,EAAoBC,QAApB,CAAP;AACH;;;4BAEGD,K,EAAO;AACP,mBAAO,KAAKL,IAAL,CAAUmD,GAAV,CAAc9C,KAAd,EAAqB,KAAKsD,UAAL,CAAgBtD,KAAhB,CAArB,CAAP;AACH;;AAED;;;;mCACWA,K,EAAO;AACd,mBAAO;AACHiE,gCAAgBjE,MAAMiE,cADnB;AAEHF,wBAAQ/D,MAAM+D,MAFX;AAGHG,4BAAYlE,MAAMkE,UAHf;AAIH1B,+BAAexC,MAAMwC,aAJlB;AAKH2B,wBAAQnE,MAAMmE,MALX;AAMH1B,sBAAMzC,MAAMyC;AANT,aAAP;AAQH;;;;;;AAGLO,OAAOC,OAAP,GAAiBE,UAAjB,C;;;;;;;;;;;;;ICtCMpE,Y;AACF,4BAAc;AAAA;;AACV;AACA,aAAKuE,UAAL,GAAkB;AACdc,mBAAOC,SADO;AAEdC,kBAAMD,SAFQ;AAGdE,iBAAKF,SAHS;AAIdG,mBAAOH;AAJO,SAAlB;AAMH;;;;sCAEarE,K,EAAOsC,I,EAAM;AACvB,oBAAQtC,KAAR;AACI,qBAAK,WAAL;AACI,yBAAKsD,UAAL,CAAgBgB,IAAhB,IAAwB,KAAKhB,UAAL,CAAgBgB,IAAhB,CAAqBhC,IAArB,CAAxB;AACA;AACJ,qBAAK,OAAL;AACI,yBAAKgB,UAAL,CAAgBc,KAAhB,IAAyB,KAAKd,UAAL,CAAgBc,KAAhB,CAAsB9B,IAAtB,CAAzB;AACA;AACJ,qBAAK,YAAL;AACI,yBAAKgB,UAAL,CAAgBiB,GAAhB,IAAuB,KAAKjB,UAAL,CAAgBiB,GAAhB,EAAvB;AACA;AACJ,qBAAK,OAAL;AACI,yBAAKjB,UAAL,CAAgBkB,KAAhB,IAAyB,KAAKlB,UAAL,CAAgBkB,KAAhB,CAAsBlC,IAAtB,CAAzB;AAXR;AAaH;;;yCAEgBtC,K,EAAOC,Q,EAAU;AAC9B,oBAAQD,KAAR;AACI,qBAAK,WAAL;AACI,yBAAKsD,UAAL,CAAgBgB,IAAhB,GAAuBrE,QAAvB;AACA;AACJ,qBAAK,OAAL;AACI,yBAAKqD,UAAL,CAAgBc,KAAhB,GAAwBnE,QAAxB;AACA;AACJ,qBAAK,YAAL;AACI,yBAAKqD,UAAL,CAAgBiB,GAAhB,GAAsBtE,QAAtB;AACA;AACJ,qBAAK,OAAL;AACI,yBAAKqD,UAAL,CAAgBkB,KAAhB,GAAwBvE,QAAxB;AAXR;AAaH;;;4CAEmBD,K,EAAO;AACvB,oBAAQA,KAAR;AACI,qBAAK,WAAL;AACI,2BAAO,KAAKsD,UAAL,CAAgBgB,IAAvB;AACA;AACJ,qBAAK,OAAL;AACI,2BAAO,KAAKhB,UAAL,CAAgBc,KAAvB;AACA;AACJ,qBAAK,YAAL;AACI,2BAAO,KAAKd,UAAL,CAAgBiB,GAAvB;AACA;AACJ,qBAAK,OAAL;AACI,2BAAO,KAAKjB,UAAL,CAAgBkB,KAAvB;AAXR;AAaH;;;gCAEO;AACJ,iBAAKlB,UAAL,GAAkB;AACdc,uBAAOC,SADO;AAEdC,sBAAMD,SAFQ;AAGdE,qBAAKF,SAHS;AAIdG,uBAAOH;AAJO,aAAlB;AAMH;;;;;;AAKLrB,OAAOC,OAAP,GAAiBlE,YAAjB,C;;;;;;;;;;;;;ICtEMC,U;AACF,wBAAYG,OAAZ,EAAqB;AAAA;;AACjB,aAAKsF,IAAL,GAAYtF,OAAZ;AACA,aAAKuF,MAAL,GAAc,EAAd;AACH;;;;+BAEMC,Q,EAAU;AACb,iBAAKF,IAAL,GAAYE,QAAZ;AACH;;AAED;;;;;;;;;iCAMSlE,C,EAAGC,C,EAAGC,C,EAAG;AAAA;;AACd;AACA,gBAAI,KAAK+D,MAAL,CAAYjE,IAAI,GAAJ,GAAUC,CAAV,GAAc,GAAd,GAAoBC,CAAhC,CAAJ,EAAyC;AACrC,uBAAOiE,QAAQC,OAAR,CAAgB,KAAKH,MAAL,CAAYjE,IAAI,GAAJ,GAAUC,CAAV,GAAc,GAAd,GAAoBC,CAAhC,CAAhB,CAAP;AACH;AACD;AACA,iBAAK+D,MAAL,CAAYjE,IAAI,GAAJ,GAAUC,CAAV,GAAc,GAAd,GAAoBC,CAAhC,IAAqC,UAArC;;AAEA,mBAAOmE,MAAM,KAAKC,aAAL,CAAmBtE,CAAnB,EAAsBC,CAAtB,EAAyBC,CAAzB,CAAN;AACH;AADG,aAEFC,IAFE,CAEG,KAAKoE,kBAFR,EAGFpE,IAHE,CAGG,gBAAQ;AACV,sBAAK8D,MAAL,CAAYjE,IAAI,GAAJ,GAAUC,CAAV,GAAc,GAAd,GAAoBC,CAAhC,IAAqC2B,IAArC;AACA,uBAAOA,IAAP;AACH,aANE,CAAP;AAOH;;AAED;;;;;;;;;sCAMc7B,C,EAAGC,C,EAAGC,C,EAAG;AACnB,gBAAIsE,MAAM,KAAKR,IAAf;AACAQ,kBAAMA,IAAIC,OAAJ,CAAY,KAAZ,EAAmBzE,CAAnB,CAAN;AACAwE,kBAAMA,IAAIC,OAAJ,CAAY,KAAZ,EAAmBxE,CAAnB,CAAN;AACAuE,kBAAMA,IAAIC,OAAJ,CAAY,KAAZ,EAAmBvE,CAAnB,CAAN;AACA,mBAAOsE,GAAP;AACH;;AAED;;;;;;2CAGmBE,Q,EAAU;AACzB,gBAAIA,SAASC,MAAT,KAAoB,GAAxB,EAA6B;AACzB,uBAAOD,SAASE,IAAT,GAAgBzE,IAAhB,CAAqB;AAAA,2BAAQgE,QAAQU,MAAR,CAAehD,IAAf,CAAR;AAAA,iBAArB,CAAP;AACH;AACD,mBAAO6C,SAASE,IAAT,EAAP;AACH;;;;;;AAILrC,OAAOC,OAAP,GAAiBjE,UAAjB,C","file":"zera.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zera\"] = factory();\n\telse\n\t\troot[\"zera\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1eada742fb536023f917","var Map = require('./map');\nvar EventEmitter = require('./eventEmitter');\nvar TileLoader = require('./tileLoader');\n\n/**\n * \n */\nclass Interactive {\n    constructor(map, gridUrl) {\n        // Map element\n        if (map) {\n            this._bindMap(map);\n        }\n        this._tileLoader = new TileLoader(gridUrl);\n        // We asume 256x256px tiles\n        this._tileSize = 256;\n        // At the moment only one callback is supported so a custom event emitter is used.\n        this._eventEmitter = new EventEmitter();\n    }\n\n    /**\n     * Add the grid url from a tilejson file\n     * @deprecated\n     * Method added for backwards compatibility with wax\n     */\n    tilejson(tilejson) {\n        this._tileLoader.setUrl(tilejson.grids[0]);\n        return this;\n    }\n\n    /**\n     * Add the native map \n     * @deprecated\n     * Method added for backwards compatibility with wax\n     */\n    map(map) {\n        this._bindMap(map);\n        return this;\n    }\n\n    /**\n     * Attach a native map to the interactivity object.\n     * @param {*} map \n     */\n    _bindMap(map) {\n        this._map = new Map(map);\n        this._map.on('click', this._onMapClick.bind(this));\n        this._map.on('mousemove', this._onMapMouseMove.bind(this));\n    }\n\n    /**\n     * Attach event listeners to map events.\n     * @param {on|off|error} event - The name of the event \n     * @param {function} callback - The callback to be executed when the event is fired\n     */\n    on(event, callback) {\n        switch (event) {\n            case 'on':\n                this._eventEmitter.addEventListener('mousemove', callback)\n                this._eventEmitter.addEventListener('click', callback)\n                break;\n            case 'off':\n                this._eventEmitter.addEventListener('featureout', callback)\n                break;\n            case 'error':\n                this._eventEmitter.addEventListener('error', callback)\n                break;\n        }\n        return this;\n    }\n\n    /**\n     * Callback executed when the native map click event is fired\n     * @param {*} e \n     */\n    _onMapClick(e) {\n        const eventClone = this._map.cloneEvent(e);\n        const coords = this._getTileCoordsFromMouseEvent(eventClone);\n        this._tileLoader.loadTile(coords.z, coords.x, coords.y)\n            .then(tile => {\n                if(tile !== 'fetching'){\n                    return this._objectForEvent(tile, eventClone, 'click');\n                }\n            })\n            .catch(err => {\n                this._eventEmitter.dispatchEvent('error', err);\n            });\n    }\n\n    /**\n     * Callback executed when the native map \"mousemove\" event is fired.\n     * @param {*} e \n     */\n    _onMapMouseMove(e) {\n        const eventClone = this._map.cloneEvent(e);\n        const coords = this._getTileCoordsFromMouseEvent(eventClone);\n        this._tileLoader.loadTile(coords.z, coords.x, coords.y)\n            .then(tile => {\n                if(tile !== 'fetching'){\n                    return this._objectForEvent(tile, eventClone, 'mousemove');\n                }                    \n            })\n            .catch(err => {\n                this._eventEmitter.dispatchEvent('error', err);\n            });\n    }\n\n    /**\n     * Return the tile coordinates from a mouseEvent\n     * @param {*} mouseEvent \n     */\n    _getTileCoordsFromMouseEvent(event) {\n        const pixelPoint = this._map.project(event);\n        const coords = this._unscale(pixelPoint, this._tileSize);\n        coords.z = this._map.getZoom()\n        return coords;\n    }\n\n    _unscale(pixelPoint, tileSize) {\n        return {\n            x: Math.floor(pixelPoint.x / tileSize),\n            y: Math.floor(pixelPoint.y / tileSize),\n        }\n    }\n\n    /**\n     * Get the data from a map event.\n     * Using the event coords and the grid.json tile.\n     * \n     * This method fires an event with a `data` property. \n     * \n     * Warning: This method mutates the event object!\n     */\n    _objectForEvent(tile, event, eventType) {\n        const point = this._map.project(event);\n        // 4 pixels asigned to each grid in the utfGrid.\n        const resolution = 4;\n        // get the tile coords to which the pixel belongs\n        let { x, y } = this._unscale(point, this._tileSize);\n        const max = Math.pow(2, this._map.getZoom());\n        x = (x + max) % max;\n        y = (y + max) % max;\n\n        if (tile && tile.grid) {\n            let gridX = Math.floor((point.x - (x * this._tileSize)) / resolution);\n            let gridY = Math.floor((point.y - (y * this._tileSize)) / resolution);\n            let idx = this._utfDecode(tile.grid[gridY].charCodeAt(gridX));\n            let key = tile.keys[idx];\n            if (tile.data.hasOwnProperty(key)) {\n                // Extend the event with the data from the grid json\n                event.data = tile.data[key];\n            }\n        }\n\n        // Add \"e\" property for backwards compatibility with wax.\n        event.e = event.originalEvent || { type: eventType };\n\n        // To emulate wax behaviour stop event propagation when there is data.\n        if (event.data && event.originalEvent) {\n            event.originalEvent.stopPropagation();\n        }\n\n        this._triggerEvent(eventType, event);\n    }\n\n    /**\n     */\n    _triggerEvent(eventType, extendedEvent) {\n        // If there is no data dont do anything!\n        if (!extendedEvent.data) {\n            this._eventEmitter.dispatchEvent('featureout', {});\n            return;\n        }\n        if (eventType === 'mousemove') {\n            this._eventEmitter.dispatchEvent('mousemove', extendedEvent);\n            return;\n        }\n        if (eventType === 'click') {\n            this._eventEmitter.dispatchEvent('featureout', {});\n            this._eventEmitter.dispatchEvent('click', extendedEvent);\n        }\n    }\n\n    /**\n     * Remove interactivity\n     */\n    remove() {\n       this._eventEmitter.clear();\n        // Remove native map listeners\n        this._map.off('click');\n        this._map.off('mousemove');\n    }\n\n    /**\n     * Decode an utf gridjson cell\n     * @see https://github.com/mapbox/utfgrid-spec/blob/master/1.3/utfgrid.md\n     * @param {string} char \n     */\n    _utfDecode(char) {\n        if (char >= 93) {\n            char--;\n        }\n        if (char >= 35) {\n            char--;\n        }\n        return char - 32;\n    }\n\n}\n\n\nmodule.exports = { Interactive };\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js","var GoogleMap = require('./google');\nvar LeafletMap = require('./leaflet');\n\nfunction Map(nativeMap) {\n    if (nativeMap.__gm) {\n        return new GoogleMap(nativeMap);\n    }\n    else {\n        return new LeafletMap(nativeMap);\n    }\n\n}\nmodule.exports = Map;\n\n\n// WEBPACK FOOTER //\n// ./lib/map/index.js","class GoogleMap {\n    constructor(nativeMap) {\n        this._map = nativeMap;\n        this._listeners = {}\n    }\n\n    /**\n     * Return the pixel coordinates of an event at a certain zoom level.\n     */\n    project(event) {\n        const latLng = event.latLng;\n        const point = this._map.getProjection().fromLatLngToPoint(latLng);\n        const scale = Math.pow(2, this.getZoom());\n        return {\n            x: Math.floor(scale * point.x),\n            y: Math.floor(scale * point.y),\n        }\n    }\n\n    getZoom() {\n        return this._map.getZoom();\n    }\n\n    on(event, callback) {\n        this._listeners[event] = this._map.addListener(event, callback);\n    }\n\n    off(event){\n        this._listeners[event] && this._listeners[event].remove();\n    }\n\n    // We need to clone events to avoid mutations causing buggy behaviour\n    cloneEvent(event) {\n        return {\n            da: event.da,\n            latLng: event.latLng,\n            pixel: event.pixel\n        }\n    }\n}\n\nmodule.exports = GoogleMap;\n\n\n// WEBPACK FOOTER //\n// ./lib/map/google.js","class LeafletMap {\n    constructor(nativeMap) {\n        this._map = nativeMap;\n        this._listeners = {};\n    }\n\n    // LatLong to pixel coords\n    project(event) {\n        const latlng = event.latlng.wrap();\n        return this._map.project(latlng, this._map.getZoom()).floor()\n    }\n\n    getZoom() {\n        return this._map.getZoom();\n    }\n\n    on(event, callback) {\n        this._listeners[event] = callback;\n        return this._map.on(event, callback);\n    }\n\n    off(event) {\n        return this._map.off(event, this._listeners[event]);\n    }\n\n    // We need to clone events to avoid mutations causing buggy behaviour\n    cloneEvent(event) {\n        return {\n            containerPoint: event.containerPoint,\n            latlng: event.latlng,\n            layerPoint: event.layerPoint,\n            originalEvent: event.originalEvent,\n            target: event.target,\n            type: event.type\n        }\n    }\n}\n\nmodule.exports = LeafletMap;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/map/leaflet.js","class EventEmitter {\n    constructor() {\n        // Callbacks for every event\n        this._listeners = {\n            click: undefined,\n            move: undefined,\n            out: undefined,\n            error: undefined,\n        }\n    }\n\n    dispatchEvent(event, data) {\n        switch (event) {\n            case 'mousemove':\n                this._listeners.move && this._listeners.move(data);\n                break;\n            case 'click':\n                this._listeners.click && this._listeners.click(data);\n                break;\n            case 'featureout':\n                this._listeners.out && this._listeners.out();\n                break;\n            case 'error':\n                this._listeners.error && this._listeners.error(data);\n        }\n    }\n\n    addEventListener(event, callback) {\n        switch (event) {\n            case 'mousemove':\n                this._listeners.move = callback;\n                break;\n            case 'click':\n                this._listeners.click = callback;\n                break;\n            case 'featureout':\n                this._listeners.out = callback;\n                break;\n            case 'error':\n                this._listeners.error = callback;\n        }\n    }\n\n    removeEventListener(event) {\n        switch (event) {\n            case 'mousemove':\n                delete this._listeners.move;\n                break;\n            case 'click':\n                delete this._listeners.click;\n                break;\n            case 'featureout':\n                delete this._listeners.out;\n                break;\n            case 'error':\n                delete this._listeners.error;\n        }\n    }\n\n    clear() {\n        this._listeners = {\n            click: undefined,\n            move: undefined,\n            out: undefined,\n            error: undefined,\n        }\n    }\n}\n\n\n\nmodule.exports = EventEmitter;\n\n\n// WEBPACK FOOTER //\n// ./lib/eventEmitter.js","\nclass TileLoader {\n    constructor(gridUrl) {\n        this._url = gridUrl;\n        this._cache = {};\n    }\n\n    setUrl(newValue) {\n        this._url = newValue;\n    }\n\n    /**\n     * Load a grid.json tile from the coords using a cache system to improve performance.\n     * @param {number} z \n     * @param {number} x \n     * @param {number} y \n     */\n    loadTile(z, x, y) {\n        // If already cached the request is ignored.\n        if (this._cache[z + '_' + x + '_' + y] ) {\n            return Promise.resolve(this._cache[z + '_' + x + '_' + y]);\n        }\n        // Mark the tile as \"fetching\" to prevent duplicated requests. The value will be async obtained.\n        this._cache[z + '_' + x + '_' + y] = 'fetching';\n\n        return fetch(this._buildTileUrl(z, x, y))\n            // On server limit errors reject throw a featureError\n            .then(this._handleLimitErrors)\n            .then(data => {\n                this._cache[z + '_' + x + '_' + y] = data;\n                return data;\n            });\n    }\n\n    /**\n     * Builds the tile url from the coords.\n     * @param {number} z \n     * @param {number} x \n     * @param {number} y \n     */\n    _buildTileUrl(z, x, y) {\n        let url = this._url;\n        url = url.replace(/{z}/, z);\n        url = url.replace(/{x}/, x);\n        url = url.replace(/{y}/, y);\n        return url;\n    }\n\n    /**\n     * When the server returns a 429 we want to throw an especific error.\n     */\n    _handleLimitErrors(response) {\n        if (response.status === 429) {\n            return response.json().then(data => Promise.reject(data));\n        }\n        return response.json();\n    }\n}\n\n\nmodule.exports = TileLoader;\n\n\n// WEBPACK FOOTER //\n// ./lib/tileLoader.js"],"sourceRoot":""}